{% extends 'base.html.twig' %}

{% block title %}Recettes{% endblock %}

{% block body %}

<h1 class="title m-5">Nos recettes</h1>
    {% if not recettes.items is same as ([]) %}
        <div class="">
            <p class="">Il y'a {{ recettes.getTotalItemCount }} recette(s) au total</p>
        </div>
        <div class="block">
            <div class="container">
                <div class="columns is-multiline">
                    {%  for recette in recettes %}
                        <a class="column is-one-third mt-5" href="{{ path('app_recette', {title: recette.title}) }}">
                            <div class="card">
                                <div class="card-image">
                                    <figure class="image is-4by3">
                                        <img src="{{ vich_uploader_asset(recette, 'imageFile') }}" alt="Placeholder image">
                                    </figure>
                                </div>
                                <div class="card-content">
                                    <div class="media">
                                        <div class="media-content is-flex is-justify-content-space-between">
                                            <p class="title is-4 ">{{ recette.title|capitalize }}</p>
                                        </div>
                                    </div>
                                    <div class="is-flex is-justify-content-space-around is-align-items-center">
                                        {% if recette.cuissonTime %}
                                            <div class="is-flex is-flex-direction-column is-align-items-center is-justify-content-space-between">
                                                <ion-icon name="stopwatch-outline"></ion-icon>
                                                <p>Cuisson</p>
                                                <p>{{ recette.cuissonTime }} min</p>
                                            </div>
                                        {% endif %}
                                        {% if recette.preparationTime %}
                                            <div class="is-flex is-flex-direction-column is-align-items-center is-justify-content-space-between">
                                                <ion-icon name="hourglass-outline"></ion-icon>
                                                <p>Pr√©paration</p>
                                                <p>{{ recette.preparationTime}} min</p>
                                            </div>
                                        {% endif %}
                                        {% if recette.reposTime %}
                                            <div class="is-flex is-flex-direction-column is-align-items-center is-justify-content-space-between">
                                                <ion-icon name="timer-outline"></ion-icon>
                                                <p>Repos</p>
                                                <p>{{ recette.reposTime }} min</p>
                                            </div>
                                        {% endif %}
                                    </div>
                                    {% for userAllergens in currentUserAllergensArray %}
                                        {%  if userAllergens in recette.allergens%}
                                            <p class="has-text-danger has-text-centered mt-2"><b>Incompatible avec votre allergie</b></p>
                                        {% endif %}
                                    {% endfor %}
                                    <div class="mt-3">
                                        <p class="has-text-centered">Notes de nos internautes:</p>
                                        <progress class="progress is-primary is-small mt-1" value="{{ recette.note }}" max="5"></progress>
                                    </div>
                                    <div class="is-flex is-justify-content-space-around is-align-items-center mt-2">
                                        {%  for regime in recette.regimes%}
                                            <p><b>{{ regime|capitalize }}</b></p>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                </div>
                <div class="is-flex is-justify-content-center" >
                    {{ knp_pagination_render(recettes) }}
                </div>
            </div>
        </div>
    {% endif %}

{% endblock %}
